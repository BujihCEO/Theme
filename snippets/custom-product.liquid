<script>
    document.querySelector('.Bg_Tshirt').style.top = document.querySelector('.header__icon').offsetHeight + 'px';
    const PrintTarget = document.querySelector('.PrintTarget');
    const InputPrint = document.querySelector('.InputPrint');
    const InputPreview = document.querySelector('.InputPreview');
    
    function PrintResult(configurations) {
        return Promise.all(configurations.map(config => {
            return domtoimage.toBlob(PrintTarget, {
                width: PrintTarget.clientWidth * config.scale,
                height: PrintTarget.clientHeight * config.scale,
                style: {
                    transform: 'scale(' + config.scale + ')',
                transformOrigin: 'top left',
                },
            })
            .then((blob) => {
                var fileList = new DataTransfer();
                fileList.items.add(new File([blob], config.fileName));
                config.inputElement.files = fileList.files;
            });
        }));
    }
    
    const LinkProduct = 'https://361875-4.myshopify.com/cdn/shop/t/12/assets/';
    const productViewer = document.querySelector('.productViewer');
    const ProductColorsBox = document.querySelector('.ProductColorsBox');
    const ColorPickers = [
        'Preto',
        'Branco',
    ];
    var ProductColor = ColorPickers[0];
    ColorPickers.forEach((Color, index) => {
        var div = document.createElement('div');
        div.className = 'ColorPicker ';
        if (index === 0) {
            div.classList.add('selected');
        }
        div.setAttribute('color', Color)
        ProductColorsBox.appendChild(div);
    });
    const ColorPickerAll = document.querySelectorAll('.ColorPicker');
    ColorPickerAll[0].style.backgroundColor = 'black';
    ColorPickerAll[1].style.backgroundColor = 'white';
    ColorPickerAll.forEach((button) => {
        button.addEventListener('click', () => {
            ColorPickerAll.forEach((button) => {
                button.classList.remove('selected');
            });
            button.classList.add('selected');
            ProductColor = button.getAttribute('color');
            productViewer.style.backgroundImage = 'url('+LinkProduct+ProductColor+'.png)';
            InputPreview.setAttribute('name', `properties[Preview Color:${ProductColor}/Size:${ProductSize}]`);
        });
    });
    
    const ProductSizeBox = document.querySelector('.ProductSizeBox');
    const SizePickers = [
        'P',
        'M',
        'G',
        'GG',
        'XGG',
    ];
    var ProductSize = SizePickers[0];
    SizePickers.forEach((Size, index) => {
        var div = document.createElement('div');
        div.className = 'SizePicker ';
        if (index === 0) {
            div.classList.add('selected');
        }
        div.innerText = Size;
        div.setAttribute('size', Size);
        ProductSizeBox.appendChild(div);
    });
    const SizePickerAll = document.querySelectorAll('.SizePicker');
    SizePickerAll.forEach((button) => {
        button.addEventListener('click', () => {
            SizePickerAll.forEach((button) => {
                button.classList.remove('selected');
            });
            button.classList.add('selected');
            ProductSize = button.getAttribute('size');
            InputPreview.setAttribute('name', `properties[Preview Color:${ProductColor}/Size:${ProductSize}]`);
        });
    });
    
    InputPreview.setAttribute('name', `properties[Preview Color:${ProductColor}/Size:${ProductSize}]`);
</script>